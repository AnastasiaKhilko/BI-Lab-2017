DROP TABLE "USER_3"."DIM_CONSUMERS" CASCADE CONSTRAINTS
;

DROP TABLE "USER_3"."DIM_DATE" CASCADE CONSTRAINTS
;

DROP TABLE "USER_3"."DIM_DEPARTMENTS" CASCADE CONSTRAINTS
;

DROP TABLE "USER_3"."DIM_PRODUCTS" CASCADE CONSTRAINTS
;

DROP TABLE "USER_3"."DIM_PROMOTION" CASCADE CONSTRAINTS
;

DROP TABLE "USER_3"."DIM_SALE_STATE" CASCADE CONSTRAINTS
;

DROP TABLE "USER_3"."FACT_SALES" CASCADE CONSTRAINTS
;

CREATE TABLE "USER_3"."DIM_CONSUMERS"
(
	"CONSUMER_ID" NUMBER(8,2) NOT NULL,
	"CONSUMER_TITLE" VARCHAR2(50),
	"ADDRESS" VARCHAR2(50),
	"CITY" VARCHAR2(50),
	"COUNTRY" VARCHAR2(50),
	"REGION" VARCHAR2(50),
	"PRICE_INDEX" NUMBER(8,2),
	"POSTAL_CODE" VARCHAR2(50),
	"PHONE" VARCHAR2(50),
	"CONSUMER_CODE" NUMBER(8,2)
)
;

CREATE TABLE "USER_3"."DIM_DATE"
(
	"DATE_ID" DATE NOT NULL,
	"DAY_IN_MONTH" DATE,
	"DAY_IN_WEEK" DATE,
	"DAY_IN_YEAR" DBURITYPE,
	"DAY_TITLE" VARCHAR2(50),
	"WEEK_IN_MONTH" NUMBER(8,2),
	"MONTH_IN_YEAR" NUMBER(8,2),
	"MONTH_NAME" VARCHAR2(50),
	"QUARTER" NUMBER(8,2),
	"YEAR" VARCHAR2(50)
)
;

CREATE TABLE "USER_3"."DIM_DEPARTMENTS"
(
	"ADDRESS" VARCHAR2(50),
	"CITY" VARCHAR2(50),
	"COUNTRY" VARCHAR2(50),
	"REGION" VARCHAR2(50),
	"DEPARTMENT_ID" NUMBER(8,2) NOT NULL,
	"POSTAL_CODE" VARCHAR2(50)
)
;

CREATE TABLE "USER_3"."DIM_PRODUCTS"
(
	"PRODUCT_ID" NUMBER(8,2) NOT NULL,
	"PRODUCT_NAME" VARCHAR2(50),
	"PRODUCT_CATEGORY" VARCHAR2(50),
	"PRODUCT_TYPE" VARCHAR2(50),
	"PACKAGE_SIZE" VARCHAR2(50),
	"PACKAGE_COLOR" VARCHAR2(50),
	"ITEM_SIZE" VARCHAR2(50),
	"TOBACCO" VARCHAR2(50),
	"ITEMS_PACKAGE" VARCHAR2(50),
	"PRODUCT_IMAGE" VARCHAR2(50),
	"LOCALIZATION" VARCHAR2(50),
	"STD_PRICE" VARCHAR2(50),
	"PRODUCT_CODE" NUMBER(8,2)
)
;

CREATE TABLE "USER_3"."DIM_PROMOTION"
(
	"PROMO_ID" NUMBER(8,2) NOT NULL,
	"PROMO_NAME" VARCHAR2(50),
	"DESC" VARCHAR2(50),
	"PROMO_TYPE" VARCHAR2(50),
	"PROMO_COST" NUMBER(8,2),
	"PROMO_CODE" NUMBER(8,2),
	"START_DT" VARCHAR2(50),
	"END_DT" VARCHAR2(50),
	"IS_ACTIVE" NUMBER(8,2)
)
;

CREATE TABLE "USER_3"."DIM_SALE_STATE"
(
	"STATE_ID" NUMBER(8,2) NOT NULL,
	"STATE_DESC" VARCHAR2(50)
)
;

CREATE TABLE "USER_3"."FACT_SALES"
(
	"PRODUCT_ID" NUMBER(8,2) NOT NULL,
	"DEPARTMENT_ID" NUMBER(8,2) NOT NULL,
	"CONSUMER_ID" NUMBER(8,2) NOT NULL,
	"PROMO_ID" NUMBER(8,2) NOT NULL,
	"AMOUNT" NUMBER(8,2),
	"QUANTITY" NUMBER(8,2),
	"TIME_ID" DATE NOT NULL,
	"STATE_ID" NUMBER NOT NULL
)
;

ALTER TABLE "USER_3"."DIM_CONSUMERS" 
 ADD CONSTRAINT "PK_CONSUMERS"
	PRIMARY KEY ("CONSUMER_ID") USING INDEX
;

ALTER TABLE "USER_3"."DIM_DATE" 
 ADD CONSTRAINT "PK_TIME"
	PRIMARY KEY ("DATE_ID") USING INDEX
;

ALTER TABLE "USER_3"."DIM_DEPARTMENTS" 
 ADD CONSTRAINT "PK_DEPARTMENTS"
	PRIMARY KEY ("DEPARTMENT_ID") USING INDEX
;

ALTER TABLE "USER_3"."DIM_PRODUCTS" 
 ADD CONSTRAINT "PK_TABLE1"
	PRIMARY KEY ("PRODUCT_ID") USING INDEX
;

ALTER TABLE "USER_3"."DIM_PROMOTION" 
 ADD CONSTRAINT "PK_PROMOTION"
	PRIMARY KEY ("PROMO_ID") USING INDEX
;

ALTER TABLE "USER_3"."DIM_SALE_STATE" 
 ADD CONSTRAINT "PK_SALE_STATE"
	PRIMARY KEY ("STATE_ID") USING INDEX
;

CREATE INDEX "IXFK_FACT_SALES
_SALE_STATE"   
 ON "USER_3"."FACT_SALES" ("STATE_ID") 
;

ALTER TABLE "USER_3"."FACT_SALES" 
 ADD CONSTRAINT "PK"
	PRIMARY KEY ("PRODUCT_ID","DEPARTMENT_ID","CONSUMER_ID","PROMO_ID","TIME_ID","STATE_ID") USING INDEX
;

ALTER TABLE "USER_3"."FACT_SALES" 
 ADD CONSTRAINT "FK_FACT_SALES
_CONSUMERS"
	FOREIGN KEY ("CONSUMER_ID") REFERENCES "USER_3"."DIM_CONSUMERS" ("CONSUMER_ID")
;

ALTER TABLE "USER_3"."FACT_SALES" 
 ADD CONSTRAINT "FK_FACT_SALES
_DEPARTMENTS"
	FOREIGN KEY ("DEPARTMENT_ID") REFERENCES "USER_3"."DIM_DEPARTMENTS" ("DEPARTMENT_ID")
;

ALTER TABLE "USER_3"."FACT_SALES" 
 ADD CONSTRAINT "FK_FACT_SALES
_PRODUCTS"
	FOREIGN KEY ("PRODUCT_ID") REFERENCES "USER_3"."DIM_PRODUCTS" ("PRODUCT_ID")
;

ALTER TABLE "USER_3"."FACT_SALES" 
 ADD CONSTRAINT "FK_FACT_SALES
_PROMOTION"
	FOREIGN KEY ("PROMO_ID") REFERENCES "USER_3"."DIM_PROMOTION" ("PROMO_ID")
;

ALTER TABLE "USER_3"."FACT_SALES" 
 ADD CONSTRAINT "FK_FACT_SALES
_SALE_STATE"
	FOREIGN KEY ("STATE_ID") REFERENCES "USER_3"."DIM_SALE_STATE" ("STATE_ID")
;

ALTER TABLE "USER_3"."FACT_SALES" 
 ADD CONSTRAINT "FK_FACT_SALES
_TIME"
	FOREIGN KEY ("TIME_ID") REFERENCES "USER_3"."DIM_DATE" ("DATE_ID")
;
